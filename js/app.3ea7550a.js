(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],m=0,h=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/weather-app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{app:"",absolute:"",color:"white",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.$t("appName")))]),r("v-spacer"),r("SelectLanguage")],1),r("v-main",[r("WeatherPage")],1),r("v-snackbar",{attrs:{timeout:2e3,tile:"",color:"red accent-2"},model:{value:e.isFlashErrorShow,callback:function(t){e.isFlashErrorShow=t},expression:"isFlashErrorShow"}},[e._v(" "+e._s(e.flashError?e.$t("errors."+e.flashError.errorKey):"")+" ")])],1)},i=[],s=r("5530"),o=r("2f62"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pt-4 pt-md-10"},[r("v-text-field",{attrs:{filled:"",clearable:"",rounded:"",label:e.$t("city"),placeholder:e.$t("exampleCity"),"prepend-inner-icon":"mdi-map-marker","append-outer-icon":"mdi-magnify",rules:e.searchFieldRules,"error-messages":e.isShowNoEnteredCityMessage?[e.$t("errors.noCityWithEnteredName")]:[]},on:{"click:append-outer":e.onSearchSubmit,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearchSubmit.apply(null,arguments)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("SearchHistory",{staticClass:"mb-2",on:{itemClick:e.onHistoryItemClick}}),r("v-slide-y-reverse-transition",[e.currentCity&&e.currentWeather?r("WeatherCard",{attrs:{loading:e.isCityLoading||e.isWeatherLoading,"city-name":e.currentCityName,"image-url":e.getWeatherIconUrlByName(e.currentWeather.weather[0].icon),state:e.currentWeather.weather[0].description,temp:e.currentWeather.main.temp,"feels-like-temp":e.currentWeather.main.feels_like,"max-temp":e.currentWeather.main.temp_max,"min-temp":e.currentWeather.main.temp_min,pressure:e.currentWeather.main.pressure,humidity:e.currentWeather.main.humidity,"wind-speed":e.currentWeather.wind.speed,"wind-deg":e.currentWeather.wind.deg,"time-stamp":e.currentWeather.dt,"time-zone":e.currentWeather.timezone}}):e._e()],1)],1)},u=[],l=r("1da1"),m=(r("96cf"),r("07ac"),r("ac1f"),r("841c"),r("99af"),r("d3b7"),r("bc3a")),h=r.n(m),d=function(){return{error:null}},p={error:function(e){return e.error}},f={SET_ERROR:function(e,t){e.error={errorKey:t,isShow:!0}},CLEAR_ERROR:function(e){e.error=null}},v={},g={state:d,getters:p,actions:v,mutations:f},y=(r("7db0"),r("2ef0")),b=["ru","en"],w=(r("e9c4"),"searchHistory");function S(e){if(!e)return[];try{var t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(r){return[]}}function x(){var e=localStorage.getItem(w);return S(e)}function _(e){localStorage.setItem(w,JSON.stringify(e))}function C(e){var t=function(t){t.key===w&&e(S(t.newValue))};window.addEventListener("storage",t);var r=function(){window.removeEventListener("storage",t)};return r}var E=null,N=function(){return{searchHistory:[]}},O={searchHistory:function(e){return e.searchHistory}},T={ADD_HISTORY_ITEM:function(e,t){t&&t.local_names&&!e.searchHistory.find((function(e){return e["en"]===t.local_names["en"]}))&&(e.searchHistory.unshift(Object(y["pick"])(t.local_names,b)),_(e.searchHistory))},SET_HISTORY:function(e,t){e.searchHistory=t}},W={addHistoryItem:function(e,t){var r=e.commit;r("ADD_HISTORY_ITEM",t)},searchCityByLocationName:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,r.next=3,R(t);case 3:return a=r.sent,n("addHistoryItem",a),r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},fetchHistory:function(e){var t=e.commit;t("SET_HISTORY",x())},subscribeOnHistoryChange:function(e){var t=e.commit;E||(E=C((function(e){t("SET_HISTORY",e)})))},unsubscribeFromHistoryChange:function(){E&&(E(),E=null)}},L={state:N,getters:O,actions:W,mutations:T};n["a"].use(o["a"]);var k=new o["a"].Store({modules:{errors:g,search:L}}),j=h.a.create();j.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),j.interceptors.response.use((function(e){return e}),(function(e){return k.commit("SET_ERROR","requestError"),Promise.reject(e)}));var $=j,H=Object({NODE_ENV:"production",BASE_URL:"/weather-app/"}).API_KEY;function R(e){return $.get("http://api.openweathermap.org/geo/1.0/direct?q=".concat(e,"&limit=1&appid=").concat(H)).then((function(e){return Promise.resolve(e.data.length?e.data[0]:null)}))}function I(e){var t=e.lon,r=e.lat,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return $.get("http://api.openweathermap.org/data/2.5/weather?units=metric&lat=".concat(r,"&lon=").concat(t,"&appid=").concat(H,"&lang=").concat(n)).then((function(e){return Promise.resolve(e.data)}))}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"https://openweathermap.org/img/wn/".concat(e,"@").concat(t,"x.png")}r("3ca3"),r("ddb0"),r("9861"),r("c1f9"),r("25f0");function D(){var e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries())}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=null===t?"":t,n=new URLSearchParams(window.location.search);n.set(e,r);var a=window.location.pathname+"?"+n.toString();history.pushState(null,"",a)}var P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mx-auto weather-card",attrs:{dark:"",flat:"",rounded:"xl","min-height":"310"}},[r("v-fade-transition",{attrs:{group:""}},[e.loading?r("div",{key:"progress",staticClass:"progress-wrapper"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"white"}})],1):r("div",{key:"weather-card-content"},[r("v-list-item",{attrs:{"two-line":""}},[r("v-list-item-content",[r("v-list-item-title",{staticClass:"text-h5"},[e._v(" "+e._s(e.cityName)+" ")]),r("v-list-item-subtitle",[e._v(e._s(e.formattedData.time))])],1)],1),r("v-card-text",[r("div",{staticClass:"d-flex flex-row align-center flex-wrap"},[r("div",{staticClass:"text-h2"},[e._v(" "+e._s(e.formattedData.temp)+" ")]),r("div",[r("v-img",{attrs:{src:e.imageUrl,alt:e.formattedData.state,width:"160",height:"120"}})],1),r("div",{staticClass:"d-flex flex-column"},[r("span",[e._v(e._s(e.formattedData.state))]),r("span",[e._v(e._s(e.formattedData.feelsLikeTemp))]),r("span",[e._v(e._s(e.formattedData.maxMinTemp)+" ")])])])]),r("div",e._l(e.mainProperties,(function(t){return r("v-chip",{key:t.value,staticClass:"ma-2",attrs:{color:"grey lighten-5",outlined:"",title:t.title}},[r("v-icon",{attrs:{left:""}},[e._v(" "+e._s(t.icon)+" ")]),e._v(" "+e._s(t.value)+" ")],1)})),1)],1)])],1)},A=[];r("a9e3"),r("fb6a"),r("b680");function F(e){return e.charAt(0).toUpperCase()+e.slice(1)}function q(e){return"".concat(e.toFixed(),"°")}function U(e){var t=["N","NE","E","SE","S","SW","W","NW"];return t[Math.floor(Math.round(e%360)/45)]}var B={name:"WeatherCard",props:{loading:{type:Boolean,default:!1},cityName:{type:String,required:!0},imageUrl:String,state:String,temp:{type:[String,Number],required:!0},feelsLikeTemp:[String,Number],maxTemp:[String,Number],minTemp:[String,Number],pressure:[String,Number],humidity:[String,Number],windSpeed:[String,Number],windDeg:[String,Number],timeStamp:[String,Number],timeZone:{type:[String,Number],default:0}},computed:{formattedData:function(){var e,t,r;return this.timeStamp&&(e=new Date(1e3*(this.timeStamp+this.timeZone)),t=e.getUTCHours().toLocaleString(this.$i18n.locale,{minimumIntegerDigits:2}),r=e.getUTCMinutes().toLocaleString(this.$i18n.locale,{minimumIntegerDigits:2})),{state:this.state?F(this.state):"",temp:this.temp?q(this.temp):null,feelsLikeTemp:this.feelsLikeTemp?this.$t("feelsLike",{temp:q(this.feelsLikeTemp)}):null,maxMinTemp:this.maxTemp&&this.minTemp?this.$t("maxMinTemp",{max:q(this.maxTemp),min:q(this.minTemp)}):null,pressure:this.pressure?this.$t("pressureValue",{value:this.pressure}):null,humidity:this.humidity?"".concat(this.humidity,"%"):null,wind:this.windSpeed&&this.windDeg?this.$t("wind.speedAndDirection",{speed:this.windSpeed,direction:this.$t("wind.directions.".concat(U(this.windDeg)))}):null,time:e?this.$t("timeNow",{time:"".concat(t,":").concat(r)}):null}},mainProperties:function(){return[{icon:"mdi-weather-windy",value:this.formattedData.wind,title:this.$t("wind.wind")},{icon:"mdi-water-percent",value:this.formattedData.humidity,title:this.$t("humidity")},{icon:"mdi-gauge",value:this.formattedData.pressure,title:this.$t("pressure")}]}}},Y=B,J=(r("b4fe"),r("2877")),K=r("6544"),z=r.n(K),Z=r("b0af"),G=r("99d9"),Q=r("cc20"),X=r("0789"),ee=r("132d"),te=r("adda"),re=r("da13"),ne=r("5d23"),ae=r("490a"),ie=Object(J["a"])(Y,P,A,!1,null,"373552f8",null),se=ie.exports;z()(ie,{VCard:Z["a"],VCardText:G["a"],VChip:Q["a"],VFadeTransition:X["c"],VIcon:ee["a"],VImg:te["a"],VListItem:re["a"],VListItemContent:ne["a"],VListItemSubtitle:ne["b"],VListItemTitle:ne["c"],VProgressCircular:ae["a"]});var oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.searchHistory,(function(t){return r("v-chip",{key:t[e.$i18n.locale],staticClass:"ma-0 mr-2 mb-2",on:{click:function(r){return e.$emit("itemClick",t)}}},[e._v(" "+e._s(t[e.$i18n.locale])+" ")])})),1)},ce=[],ue={name:"SearchHistory",computed:Object(s["a"])({},Object(o["c"])(["searchHistory"])),methods:Object(s["a"])({},Object(o["b"])(["fetchHistory","subscribeOnHistoryChange","unsubscribeFromHistoryChange"])),created:function(){this.fetchHistory(),this.subscribeOnHistoryChange()},destroyed:function(){this.unsubscribeFromHistoryChange()}},le=ue,me=Object(J["a"])(le,oe,ce,!1,null,null,null),he=me.exports;z()(me,{VChip:Q["a"]});var de={name:"WeatherPage",components:{WeatherCard:se,SearchHistory:he},data:function(){var e=this;return{isCityLoading:!1,isWeatherLoading:!1,searchText:"",currentCity:null,currentWeather:null,isShowNoEnteredCityMessage:!1,searchFieldRules:[function(){return!!e.searchText&&e.searchText.length>0||e.$t("errors.cityNameIsRequired")}]}},computed:{currentLocale:function(){return this.$i18n.locale},currentCityName:function(){var e,t=(null===(e=this.currentCity)||void 0===e?void 0:e.local_names)||[];return t[this.$i18n.locale]||t["en"]||Object.values(t)[0]||""}},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["searchCityByLocationName"])),{},{initData:function(){this.searchText=D().search||"",this.fetchCity()},onSearchSubmit:function(){try{M("search",this.searchText),this.fetchCity()}catch(e){console.log("error search city")}},onHistoryItemClick:function(e){this.searchText=e[this.currentLocale],this.onSearchSubmit()},fetchCity:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.searchText){t.next=2;break}return t.abrupt("return");case 2:return e.isCityLoading=!0,t.next=5,e.searchCityByLocationName(e.searchText);case 5:e.currentCity=t.sent,e.isCityLoading=!1,e.isShowNoEnteredCityMessage=!e.currentCity;case 8:case"end":return t.stop()}}),t)})))()},fetchWeather:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentCity){t.next=2;break}return t.abrupt("return");case 2:return e.isWeatherLoading=!0,r=e.currentCity,n=r.lon,a=r.lat,t.next=6,I({lon:n,lat:a},e.$i18n.locale);case 6:e.currentWeather=t.sent,e.isWeatherLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},getWeatherIconUrlByName:V}),watch:{searchText:function(){this.isShowNoEnteredCityMessage=!1},currentCity:function(){this.fetchWeather()},currentLocale:function(){this.fetchWeather()}},created:function(){this.initData(),window.addEventListener("popstate",this.initData)},destroyed:function(){window.removeEventListener("popstate",this.initData)}},pe=de,fe=r("a523"),ve=r("8654"),ge=Object(J["a"])(pe,c,u,!1,null,"c165b638",null),ye=ge.exports;z()(ge,{VContainer:fe["a"],VSlideYReverseTransition:X["e"],VTextField:ve["a"]});var be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-btn",e._g(e._b({attrs:{text:""}},"v-btn",a,!1),n),[r("v-icon",[e._v("mdi-translate")]),r("v-icon",{attrs:{"x-small":"",light:""}},[e._v("mdi-chevron-down")])],1)]}}])},[r("v-list",{attrs:{dense:""}},[r("v-list-item-group",{attrs:{color:"primary"},model:{value:e.$i18n.locale,callback:function(t){e.$set(e.$i18n,"locale",t)},expression:"$i18n.locale"}},e._l(e.selectItems,(function(t){return r("v-list-item",{key:t.value,attrs:{value:t.value,selectable:""}},[r("v-list-item-title",[e._v(e._s(t.text))])],1)})),1)],1)],1)},we=[],Se=(r("d81d"),{name:"SelectLanguage",computed:{selectItems:function(){var e=this;return b.map((function(t){return{text:e.$t("i18n.languageName",t),value:t}}))}}}),xe=Se,_e=r("8336"),Ce=r("8860"),Ee=r("1baa"),Ne=r("e449"),Oe=Object(J["a"])(xe,be,we,!1,null,null,null),Te=Oe.exports;z()(Oe,{VBtn:_e["a"],VIcon:ee["a"],VList:Ce["a"],VListItem:re["a"],VListItemGroup:Ee["a"],VListItemTitle:ne["c"],VMenu:Ne["a"]});var We={name:"App",components:{WeatherPage:ye,SelectLanguage:Te},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])({flashError:"error"})),{},{isFlashErrorShow:{get:function(){return this.flashError&&this.flashError.isShow},set:function(){this.clearFlashError()}}}),methods:Object(s["a"])({},Object(o["d"])({clearFlashError:"CLEAR_ERROR"}))},Le=We,ke=r("7496"),je=r("40dc"),$e=r("f6c4"),He=r("2db4"),Re=r("2fa4"),Ie=r("2a7f"),Ve=Object(J["a"])(Le,a,i,!1,null,null,null),De=Ve.exports;z()(Ve,{VApp:ke["a"],VAppBar:je["a"],VMain:$e["a"],VSnackbar:He["a"],VSpacer:Re["a"],VToolbarTitle:Ie["a"]});var Me=r("f309"),Pe=r("a925"),Ae=r("1072"),Fe={$vuetify:Object(s["a"])({},Ae["a"]),appName:"EasyWeatherApp",city:"City",exampleCity:"London",feelsLike:"Feels like {temp}",maxMinTemp:"Max {max}, min {min}",pressureValue:"{value} mm Hg",timeNow:"Now {time}",humidity:"Humidity",pressure:"Atmosphere pressure",wind:{wind:"Wind",speedAndDirection:"{speed} m/s, {direction}",directions:{N:"N",NE:"NE",E:"E",SE:"SE",S:"S",SW:"SW",W:"W",NW:"NW"}},i18n:{selectLanguage:"Select language",languageName:"English"},errors:{noCityWithEnteredName:"City with the entered name not found",requestError:"Something went wrong...",cityNameIsRequired:"Enter the city name"}},qe=r("e1bf"),Ue={$vuetify:Object(s["a"])({},qe["a"]),appName:"EasyWeatherApp",city:"Город",exampleCity:"Москва",feelsLike:"Ощущается как {temp}",maxMinTemp:"Макс. {max}, мин. {min}",pressureValue:"{value} мм рт. ст.",timeNow:"Сейчас {time}",humidity:"Влажность",pressure:"Атмосферное давление",wind:{wind:"Ветер",speedAndDirection:"{speed} м/с, {direction}",directions:{N:"С",NE:"СВ",E:"В",SE:"ЮВ",S:"Ю",SW:"ЮЗ",W:"З",NW:"СЗ"}},i18n:{selectLanguage:"Выберите язык",languageName:"Русский"},errors:{noCityWithEnteredName:"Город с указанным названием не найден",requestError:"Что-то пошло не так...",cityNameIsRequired:"Введите название города"}};n["a"].use(Pe["a"]);var Be=new Pe["a"]({locale:"ru",messages:{en:Fe,ru:Ue}});n["a"].use(Me["a"]);var Ye=new Me["a"]({lang:{t:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Be.t(e,r)}}}),Je=r("87f6"),Ke=r.n(Je);n["a"].config.productionTip=!1,n["a"].use(Ke.a,{shorts:{custom:{color:"purple"}},property:"$toast"}),new n["a"]({vuetify:Ye,i18n:Be,store:k,render:function(e){return e(De)}}).$mount("#app")},"7a37":function(e,t,r){},b4fe:function(e,t,r){"use strict";r("7a37")}});
//# sourceMappingURL=app.3ea7550a.js.map